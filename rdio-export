#!/usr/bin/env python
import json
import rdioexport

if __name__ == '__main__':
	rdio = rdioexport.client.get_rdio_client()
	current_user_key = rdio.call('currentUser')['key']

	start = 0
	batch_size = 100
	while True:
		albums = rdio.call('getAlbumsInCollection',
			user=current_user_key,
			sort='dateAdded',
			start=start,
			count=batch_size,
			extras=json.dumps([
				{'field': '*', 'exclude': True},
				{'field': 'name'},
				{'field': 'artist'},
			])
		)

		for album in albums:
			print u"{} - {}".format(album['artist'], album['name'])

		if (len(albums) < batch_size):
			break
		else:
			start += batch_size
